# MySQL索引原理

InnoDB支持常见的索引有：

- B+树索引：
- 全文索引
- 哈希索引： 自适应哈希索引的构建，根据数据库的使用情况为热点数据生成一个自适应hash索引，提高检索性能。

## 一. B+树索引
### B+ 树
B+树是为了磁盘或其他直接存取辅助设备设计的一种平衡查找树。

### B+树索引
B+树索引具有高扇出性，因此在数据库中B+树的高度一般是2-4层，因此最多执行2-4次IO操作。

B+树索引分为**聚类索引(cluseted index)**和**辅助索引(secondary index)**

#### 聚集索引
表中的数据按照主键顺序存放，**聚类索引**就是按照每张表的主键构造一颗B+树，同时叶子节点中存放的即为整张表的行**记录数据**，也将聚类索引的叶子节点称为**数据页**。聚集索引的这个特性决定了索引组织表中数据也是索引的一部分。

和B+树数据结构一样，每个数据页都通过一个双向链表来进行链接。

B+树索引是按照顺序物理地存放数据。聚集索引的好处是它对主键的**排序查询和范围查找**速度非常快。

#### 辅助索引
辅助索引又叫非聚集索引，叶子节点并不包含行记录的全部数据。叶子节点除了包含键值以外，每个叶子节点中的索引行还包含了一个书签，该书签用来告诉InnoDB存储索引哪里可以找到与索引相对应的行数据。

辅助索引的的书签就是存放聚类索引的键。 当通过辅助索引查询数据时，首先InnoDB存储引擎会遍历辅助索引并通过叶级别的指针获得指向主键索引的主键，然后通过主键索引来找到一个完整的行记录。

#### 覆盖索引
InnoDB支持覆盖索引，即从辅助索引中就可以得到查询的记录，而不需要再查询聚集索引的中的记录。使用覆盖索引的好处是辅助索引不包含整行记录的所有信息，故其大小远小于聚集索引，可以减少大量的IO操作。

## 二. 哈希索引
底层采用hash算法，为了解决冲突，InnoDB采用了链式存储，

缺点：

1. 内存存储，宕机后数据丢失
2. 内存存储，空间不足
3. 不支持排序和范围查找，效率低

## 三. 全文索引
## 对比



参考：

 - [MySQL索引背后的数据结构及算法原理](http://blog.codinglabs.org/articles/theory-of-mysql-index.html)

